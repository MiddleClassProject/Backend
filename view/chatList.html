 <!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>실시간 채팅</title>
    <link rel="stylesheet" href="chat_style.css">
  </head>
  <body>
    <div class="container">
  
      <div class="chat-list">
        <ul>
          <li data-room="room1">채팅방 1</li>
          <li data-room="room2">채팅방 2</li>
          <li data-room="room3">채팅방 3</li>
        </ul>
      </div>

      <div id="chatArea" class="chat-content hidden">
        <div id="enter">
          <h3>닉네임을 입력하세요.</h3>
          <input id="nickname" /><button id="joinBtn">JOIN</button>
        </div>
        <ul id="message"></ul>
        <form id="chatForm" class="hidden">
          <input id="content" autocomplete="off" /><button>전송</button>
        </form>
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
      var nickname;
      var socket = io();
      var currentRoom = null; // 현재 활성화된 채팅방

      // 채팅방 클릭 시 오른쪽 화면 활성화 및 해당 채팅방 입장
      $(".chat-list li").click(function () {
        const room = $(this).data("room");

        // 채팅방 클릭 시 화면 활성화
        $("#chatArea").removeClass("hidden");

        if (currentRoom !== room) {
          // 이전 채팅방에서 나가기
          if (currentRoom) {
            socket.emit("leaveRoom", currentRoom);
          }

          // 새로운 채팅방 입장
          currentRoom = room;
          socket.emit("joinRoom", room);
        }

        // 채팅 입력 폼 보이기
        $("#chatForm").removeClass("hidden");
      });

      // join 버튼을 누르거나 닉네임 입력 후 Enter 버튼을 누르면 서버에 join을 요청
      $("#joinBtn").click(function (e) {
        enterNickname(e);
      });

      $("#nickname").keypress(function (e) {
        if (e.which == 13) {
          enterNickname(e);
        }
      });

      // 송신: 닉네임
      function enterNickname(e) {
        if ($("#nickname").val().trim() == "") {
          alert("닉네임을 입력하세요!");
          return false;
        }
        nickname = $("#nickname").val().trim();
        socket.emit("join", nickname);
      }

      // 수신: 신규 클라이언트 접속
      socket.on("join", function (data) {
        $("#message").append(
          $('<li class="notification">').text(
            data.nickname + "님이 입장하셨습니다."
          )
        );
      });

      // 수신: 퇴장
      socket.on("left", function (data) {
        $("#message").append(
          $("<li>").text(data.nickname + "님이 퇴장하셨습니다.")
        );
      });

      // 송신: 메시지 전송
      $("#chatForm").submit(function () {
        socket.emit("msg", { room: currentRoom, msg: $("#content").val() });
        $("#content").val("");
        return false;
      });

      // 수신: 메시지
      socket.on("msg", function (data) {
        if (data.room === currentRoom) {
          $("#message").append(
            $("<li>").text(data.nickname + ": " + data.msg)
          );
        }
      });
    </script>
  </body>
</html> -->
